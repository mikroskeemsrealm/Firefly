From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Mark Vainomaa <mikroskeem@mikroskeem.eu>
Date: Fri, 19 Apr 2019 17:44:34 +0300
Subject: [PATCH] Copy new messages.properties if not present


diff --git a/proxy/src/main/java/net/md_5/bungee/BungeeCord.java b/proxy/src/main/java/net/md_5/bungee/BungeeCord.java
index 0720ad08279d9447bf662a085cb90041831e2f33..d2730a660b444bb501b537592dc3383ae28e0f74 100644
--- a/proxy/src/main/java/net/md_5/bungee/BungeeCord.java
+++ b/proxy/src/main/java/net/md_5/bungee/BungeeCord.java
@@ -617,6 +617,15 @@ public class BungeeCord extends ProxyServer
                 getLogger().log( Level.SEVERE, "Could not load custom messages.properties", ex );
             }
         }
+        // Firefly start - copy new messages.properties if not present
+        else if(localizationBundleWrapper instanceof eu.mikroskeem.firefly.misc.ResourceBundleConfigurationWrapper) {
+            try(java.io.InputStream stream = BungeeCord.class.getResourceAsStream("/messages.properties")) {
+                java.nio.file.Files.copy(stream, file.toPath());
+            } catch (IOException e) {
+                getLogger().log(Level.WARNING, "Could not copy default messages.properties", e);
+            }
+        }
+        // Firefly end
     }
 
     @Override
